<!DOCTYPE html>


<html>
    <head>
        <meta charset="utf-8">

        <title>my tasks</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=add" />
    <!----    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=delete" />-->
        <style>
         
            
            .tasks-table{
                background-color: hwb(0 87% 13% / 0.873);
                width: 60%;
                
                margin-top:100px ;
            }
            button.btn_circ{
                height: 34px;
                width: 34px;
                border-radius: 50%;
            }
            button{
                border: none;
                font-size: 20px;
                box-shadow: 0px 3px 5px rgb(162, 162, 162 ,0.38);
            }
            .task{
                display: flex;
                background-color: aliceblue;
                padding: 8px;
                border-bottom: solid black 3px;
                transition: 1.5s;
            }
            .task:hover{
                box-shadow: 0px 3px 15px  rgb(162, 162, 162 ,0.838);
            }
            body{
                background-color: rgb(30, 0, 77);
                font-family: sans-serif;
            }
            .doneee{
                background-color: rgba(1, 135, 252, 0.746);
            }
       
        </style>

    </head>
    <body>
        <div style="direction: rtl;">
        
            <div style="display: flex; justify-content: center;align-items: center;">
                  <!-- tasks table -->
                <div class="tasks-table">
                    <!-- header -->
                    <div style="width: 100%; text-align: center; background: rgb(92, 52, 155);">
                        <h1 style="display: inline;">مهامى</h1>
                        <button id="btn_add" class="btn_circ" style="float: right; background: white; margin: 1;"><span class="material-symbols-outlined">
                            add
                            </span></button>
                    </div>
                    <!--// header// -->

                      <!-- tasks -->
                       <div id="tasks" style="padding: 20px;">
                            <div class="task">
                                <div style="width: 70%;">
                                    <h1>قراءة كتاب</h1>
                                    <div>
                                        <span>10/10/2010</span>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;width: 20%; ">
                                    <button class="btn_circ" style="background-color: brown;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                            <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
                                          </svg>
                                    </button>
                                    <button class="btn_circ" style="background-color: rgb(0, 163, 35);">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                                          </svg>
                                    </button>
                                    <button class="btn_circ" style="background-color: rgba(38, 0, 128, 0.703);">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                                          </svg>
                                    </button>
                                </div>  
                            </div>
                            
                       </div>
                     <!--// tasks// -->

                </div>
                  <!--// tasks table// -->
            </div>

        </div>
        
      
    </body>
    <script>

      
        let tas =[
      
            {
                "title":" مذاكرة",
                "date":"14/12/2022",
                "isDone":true
            },  
         
            {
                "title":"قراءن",
                "date":"14/12/2022",
                "isDone":true
            },
        
            {
                "title":"رياضه",
                "date":"14/12/2022",
                "isDone":false
            }

        ]

        

     //   let xxx =localStorage.getItem("T")

    //    tas = JSON.parse(xxx)



     //   let tas = []; // تهيئة tas كمصفوفة فارغة

let xxx = localStorage.getItem("T");

if (xxx !== null) { // تحقق من null صراحةً
    tas = JSON.parse(xxx);
}

// ... باقي الكود الخاص بك


            function showData()
            {
                document.getElementById("tasks").innerHTML=""
                let count = 0;
                for(let te of tas)
                {
                
                        let content =
                        `
                        <!-- tasks -->
                                        <div class="task ${te.isDone ? 'doneee':''}">
                                            <div style="width: 70%;">
                                                <h1>${te.title}</h1>
                                                <div>
                                                    <span>${te.date}</span>
                                                </div>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; align-items: center;width: 20%; ">
                                                <button onclick="delet(${count})" class="btn_circ" style="background-color: brown;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                                        <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
                                                    </svg>
                                                    </button>
                                                    ${te.isDone ? 
                                                    `
                                                     <button onclick="toggleTaskcomplet(${count})" class="btn_circ" style="background-color: brown;">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                                         <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                                                        </svg>
                                                     </button>
                                                    `:
                                                    `
                                                            
                                                        <button onclick="toggleTaskcomplet(${count})" class="btn_circ" style="background-color: rgb(0, 163, 35);">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/>
                                                            </svg>
                                                            </button>
                                                       
                                                    `}
                                               
                                                <button onclick="editeTask(${count})" class="btn_circ" style="background-color: rgba(38, 0, 128, 0.703);">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                                        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
                                                    </svg>
                                                </button>
                                            </div>  
                                        </div>
                                        
                                
                                <!--// tasks// -->

                        `
                        count++;
                        document.getElementById("tasks").innerHTML+=content;
                
                    }
            }
            showData();
            document.getElementById("btn_add").addEventListener("click",function(){
                let taskName = prompt(" ادخل اسم المهمة ");
                let dateNow = new Date()
                let dateTask = dateNow.getDate() +"/"+(dateNow.getMonth() + 1)+"/"+dateNow.getFullYear() +" || "+dateNow.getHours() + ":" + dateNow.getMinutes();
                let taskObj ={
                    "title":taskName,
                "date":dateTask,
                "isDone":false
                }
                tas.push(taskObj);

              lclstorg();

                showData();
            })

            function delet(v){
                 let x =   confirm("هل انت متاكد من حذف : "+tas[v].title);
                 if(x){
                    tas.splice(v,1);

                    lclstorg()

                    showData();
                 }
            }
            function editeTask(v){
                let taskTitle = prompt(" ادخل اسم المهمة الجديد",tas[v].title);
                tas[v].title = taskTitle;
                lclstorg();
                showData();
            }
           function toggleTaskcomplet(v)
           {
                let task = tas[v];
              
                task.isDone = !task.isDone;
               lclstorg();
                showData();

           }

           function lclstorg()
           {
            let tasksString = JSON.stringify(tas)
            localStorage.setItem("T",tasksString)
           }



    </script>
</html>